{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/tags/../../../node_modules/@babel/runtime/regenerator/index.js","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/typeof.js","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/app']\"","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/app']\"","webpack://@flarum/tags/./src/common/states/TagListState.ts","webpack://@flarum/tags/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Link']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@flarum/tags/./src/common/helpers/tagIcon.js","webpack://@flarum/tags/./src/forum/components/TagLinkButton.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/textContrastClass']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/extract']\"","webpack://@flarum/tags/./src/common/helpers/tagLabel.js","webpack://@flarum/tags/./src/common/utils/sortTags.tsx","webpack://@flarum/tags/./src/forum/components/TagsPage.js","webpack://@flarum/tags/./src/forum/addTagList.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/states/GlobalSearchState']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/Component']\"","webpack://@flarum/tags/./src/forum/components/TagHero.js","webpack://@flarum/tags/./src/forum/addTagFilter.tsx","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://@flarum/tags/./src/common/helpers/tagsLabel.js","webpack://@flarum/tags/./src/forum/addTagLabels.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@flarum/tags/./src/forum/utils/getSelectableTags.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@flarum/tags/./src/forum/components/ToggleButton.js","webpack://@flarum/tags/./src/common/components/TagSelectionModal.tsx","webpack://@flarum/tags/./src/forum/components/TagDiscussionModal.tsx","webpack://@flarum/tags/./src/forum/addTagControl.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@flarum/tags/./src/forum/addTagComposer.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/extenders']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/EventPost']\"","webpack://@flarum/tags/./src/forum/components/DiscussionTaggedPost.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/Model']\"","webpack://@flarum/tags/./src/common/models/Tag.ts","webpack://@flarum/tags/./src/common/extend.ts","webpack://@flarum/tags/./src/forum/extend.ts","webpack://@flarum/tags/./src/common/compat.js","webpack://@flarum/tags/./src/forum/compat.js","webpack://@flarum/tags/external assign \"flarum.core\"","webpack://@flarum/tags/./src/forum/index.ts","webpack://@flarum/tags/webpack/bootstrap","webpack://@flarum/tags/webpack/runtime/compat get default export","webpack://@flarum/tags/webpack/runtime/define property getters","webpack://@flarum/tags/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/tags/webpack/runtime/make namespace object"],"sourcesContent":["// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\nimport type Tag from '../../common/models/Tag';\n\nexport default class TagListState {\n  loadedIncludes?: Set<string>;\n\n  async load(includes: string[] = []): Promise<Tag[]> {\n    if (!this.loadedIncludes) {\n      return this.query(includes);\n    }\n\n    const unloadedIncludes = includes.filter((include) => !this.loadedIncludes!.has(include));\n\n    if (unloadedIncludes.length === 0) {\n      return Promise.resolve(app.store.all<Tag>('tags'));\n    }\n\n    return this.query(unloadedIncludes);\n  }\n\n  async query(includes: string[] = []): Promise<Tag[]> {\n    this.loadedIncludes ??= new Set();\n\n    return app.store.find<Tag[]>('tags', { include: includes.join(',') }).then((val) => {\n      includes.forEach((include) => this.loadedIncludes!.add(include));\n      return val;\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import classList from 'flarum/common/utils/classList';\n\nexport default function tagIcon(tag, attrs = {}, settings = {}) {\n  const hasIcon = tag && tag.icon();\n  const { useColor = true } = settings;\n\n  attrs.className = classList([attrs.className, 'icon', hasIcon ? tag.icon() : 'TagIcon']);\n\n  if (tag && useColor) {\n    attrs.style = attrs.style || {};\n    attrs.style['--color'] = tag.color();\n\n    if (hasIcon) {\n      attrs.style.color = tag.color();\n    }\n  } else if (!tag) {\n    attrs.className += ' untagged';\n  }\n\n  return hasIcon ? <i {...attrs} /> : <span {...attrs} />;\n}\n","import Link from 'flarum/common/components/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport classList from 'flarum/common/utils/classList';\nimport tagIcon from '../../common/helpers/tagIcon';\n\nexport default class TagLinkButton extends LinkButton {\n  view(vnode) {\n    const tag = this.attrs.model;\n    const description = tag && tag.description();\n    const className = classList('TagLinkButton hasIcon', { child: tag.isChild() }, this.attrs.className);\n\n    return (\n      <Link className={className} href={this.attrs.route} style={tag ? { '--color': tag.color() } : undefined} title={description || undefined}>\n        {tagIcon(tag, { className: 'Button-icon' })}\n        <span className=\"Button-label\">{tag ? tag.name() : app.translator.trans('flarum-tags.forum.index.untagged_link')}</span>\n      </Link>\n    );\n  }\n\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const tag = attrs.model;\n\n    attrs.params.tags = tag ? tag.slug() : 'untagged';\n    attrs.route = app.route('tag', attrs.params);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/textContrastClass'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extract'];","import extract from 'flarum/common/utils/extract';\nimport Link from 'flarum/common/components/Link';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport tagIcon from './tagIcon';\n\nexport default function tagLabel(tag, attrs = {}) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'TagLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n  const tagText = tag ? tag.name() : app.translator.trans('flarum-tags.lib.deleted_tag_text');\n\n  if (tag) {\n    const color = tag.color();\n    if (color) {\n      attrs.style['--tag-bg'] = color;\n      attrs.className = classList(attrs.className, 'colored', textContrastClass(color));\n    }\n\n    if (link) {\n      attrs.title = tag.description() || '';\n      attrs.href = app.route('tag', { tags: tag.slug() });\n    }\n\n    if (tag.isChild()) {\n      attrs.className += ' TagLabel--child';\n    }\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return m(\n    link ? Link : 'span',\n    attrs,\n    <span className=\"TagLabel-text\">\n      {tag && tag.icon() && tagIcon(tag, { className: 'TagLabel-icon' }, { useColor: false })}\n      <span className=\"TagLabel-name\">{tagText}</span>\n    </span>\n  );\n}\n","import Tag from '../models/Tag';\n\nexport default function sortTags(tags: Tag[]) {\n  return tags.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n\n    // If they're both secondary tags, sort them by their discussions count,\n    // descending.\n    if (aPos === null && bPos === null) return b.discussionCount() - a.discussionCount();\n\n    // If just one is a secondary tag, then the primary tag should\n    // come first.\n    if (bPos === null) return -1;\n    if (aPos === null) return 1;\n\n    // If we've made it this far, we know they're both primary tags. So we'll\n    // need to see if they have parents.\n    const aParent = a.parent();\n    const bParent = b.parent();\n\n    // If they both have the same parent, then their positions are local,\n    // so we can compare them directly.\n    if (aParent === bParent) return aPos - bPos;\n    // If they are both child tags, then we will compare the positions of their\n    // parents.\n    else if (aParent && bParent) return aParent.position()! - bParent.position()!;\n    // If we are comparing a child tag with its parent, then we let the parent\n    // come first. If we are comparing an unrelated parent/child, then we\n    // compare both of the parents.\n    else if (aParent) return aParent === b ? 1 : aParent.position()! - bPos;\n    else if (bParent) return bParent === a ? -1 : aPos - bParent.position()!;\n\n    return 0;\n  });\n}\n","import Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport classList from 'flarum/common/utils/classList';\n\nimport tagIcon from '../../common/helpers/tagIcon';\nimport tagLabel from '../../common/helpers/tagLabel';\nimport sortTags from '../../common/utils/sortTags';\n\nexport default class TagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('tags', app.translator.trans('flarum-tags.forum.header.back_to_tags_tooltip'));\n\n    this.tags = [];\n\n    const preloaded = app.preloadedApiDocument();\n\n    if (preloaded) {\n      this.tags = sortTags(preloaded.filter((tag) => !tag.isChild()));\n      return;\n    }\n\n    this.loading = true;\n\n    app.tagList.load(['children', 'lastPostedDiscussion', 'parent']).then(() => {\n      this.tags = sortTags(app.store.all('tags').filter((tag) => !tag.isChild()));\n\n      this.loading = false;\n\n      m.redraw();\n    });\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(app.translator.trans('flarum-tags.forum.all_tags.meta_title_text'));\n    app.setTitleCount(0);\n  }\n\n  view() {\n    return <div className=\"TagsPage\">{this.pageContent().toArray()}</div>;\n  }\n\n  pageContent() {\n    const items = new ItemList();\n\n    items.add('hero', this.hero(), 100);\n    items.add('main', <div className=\"container\">{this.mainContent().toArray()}</div>, 10);\n\n    return items;\n  }\n\n  mainContent() {\n    const items = new ItemList();\n\n    items.add('sidebar', this.sidebar(), 100);\n    items.add('content', this.content(), 10);\n\n    return items;\n  }\n\n  content() {\n    return <div className=\"TagsPage-content sideNavOffset\">{this.contentItems().toArray()}</div>;\n  }\n\n  contentItems() {\n    const items = new ItemList();\n\n    if (this.loading) {\n      items.add('loading', <LoadingIndicator />);\n    } else {\n      const pinned = this.tags.filter((tag) => tag.position() !== null);\n      const cloud = this.tags.filter((tag) => tag.position() === null);\n\n      items.add('tagTiles', this.tagTileListView(pinned), 100);\n\n      if (cloud.length) {\n        items.add('cloud', this.cloudView(cloud), 10);\n      }\n    }\n\n    return items;\n  }\n\n  hero() {\n    return IndexPage.prototype.hero();\n  }\n\n  sidebar() {\n    return (\n      <nav className=\"TagsPage-nav IndexPage-nav sideNav\">\n        <ul>{listItems(this.sidebarItems().toArray())}</ul>\n      </nav>\n    );\n  }\n\n  sidebarItems() {\n    return IndexPage.prototype.sidebarItems();\n  }\n\n  tagTileListView(pinned) {\n    return <ul className=\"TagTiles\">{pinned.map(this.tagTileView.bind(this))}</ul>;\n  }\n\n  tagTileView(tag) {\n    const lastPostedDiscussion = tag.lastPostedDiscussion();\n    const children = sortTags(tag.children() || []);\n\n    return (\n      <li className={classList('TagTile', { colored: tag.color() }, textContrastClass(tag.color()))} style={{ '--tag-bg': tag.color() }}>\n        <Link className=\"TagTile-info\" href={app.route.tag(tag)}>\n          {tag.icon() && tagIcon(tag, {}, { useColor: false })}\n          <h3 className=\"TagTile-name\">{tag.name()}</h3>\n          <p className=\"TagTile-description\">{tag.description()}</p>\n          {!!children && (\n            <div className=\"TagTile-children\">{children.map((child) => [<Link href={app.route.tag(child)}>{child.name()}</Link>, ' '])}</div>\n          )}\n        </Link>\n        {lastPostedDiscussion ? (\n          <Link className=\"TagTile-lastPostedDiscussion\" href={app.route.discussion(lastPostedDiscussion, lastPostedDiscussion.lastPostNumber())}>\n            <span className=\"TagTile-lastPostedDiscussion-title\">{lastPostedDiscussion.title()}</span>\n            {humanTime(lastPostedDiscussion.lastPostedAt())}\n          </Link>\n        ) : (\n          <span className=\"TagTile-lastPostedDiscussion\" />\n        )}\n      </li>\n    );\n  }\n\n  cloudView(cloud) {\n    return <div className=\"TagCloud\">{cloud.map((tag) => [tagLabel(tag, { link: true }), ' '])}</div>;\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Separator from 'flarum/common/components/Separator';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nimport TagLinkButton from './components/TagLinkButton';\nimport TagsPage from './components/TagsPage';\nimport app from 'flarum/forum/app';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function () {\n  // Add a link to the tags page, as well as a list of all the tags,\n  // to the index page's sidebar.\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    items.add(\n      'tags',\n      <LinkButton icon=\"fas fa-th-large\" href={app.route('tags')}>\n        {app.translator.trans('flarum-tags.forum.index.tags_link')}\n      </LinkButton>,\n      -10\n    );\n\n    if (app.current.matches(TagsPage)) return;\n\n    items.add('separator', <Separator />, -12);\n\n    const params = app.search.stickyParams();\n    const tags = app.store.all('tags');\n    const currentTag = this.currentTag();\n\n    const addTag = (tag) => {\n      let active = currentTag === tag;\n\n      if (!active && currentTag) {\n        active = currentTag.parent() === tag;\n      }\n\n      // tag.name() is passed here as children even though it isn't used directly\n      // because when we need to get the active child in SelectDropdown, we need to\n      // use its children to populate the dropdown. The problem here is that `view`\n      // on TagLinkButton is only called AFTER SelectDropdown, so no children are available\n      // for SelectDropdown to use at the time.\n      items.add(\n        'tag' + tag.id(),\n        <TagLinkButton model={tag} params={params} active={active}>\n          {tag?.name()}\n        </TagLinkButton>,\n        -14\n      );\n    };\n\n    sortTags(tags)\n      .filter(\n        (tag) => tag.position() !== null && (!tag.isChild() || (currentTag && (tag.parent() === currentTag || tag.parent() === currentTag.parent())))\n      )\n      .forEach(addTag);\n\n    const more = tags.filter((tag) => tag.position() === null).sort((a, b) => b.discussionCount() - a.discussionCount());\n\n    more.splice(0, 3).forEach(addTag);\n\n    if (more.length) {\n      items.add('moreTags', <LinkButton href={app.route('tags')}>{app.translator.trans('flarum-tags.forum.index.more_link')}</LinkButton>, -16);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/GlobalSearchState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport tagIcon from '../../common/helpers/tagIcon';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport default class TagHero extends Component {\n  view() {\n    const tag = this.attrs.model;\n    const color = tag.color();\n\n    return (\n      <header\n        className={classList('Hero', 'TagHero', { 'TagHero--colored': color, [textContrastClass(color)]: color })}\n        style={color ? { '--hero-bg': color } : undefined}\n      >\n        <div className=\"container\">{this.viewItems().toArray()}</div>\n      </header>\n    );\n  }\n\n  /**\n   * @returns {ItemList}\n   */\n  viewItems() {\n    const items = new ItemList();\n\n    items.add('content', <div className=\"containerNarrow\">{this.contentItems().toArray()}</div>, 80);\n\n    return items;\n  }\n\n  /**\n   * @returns {ItemList}\n   */\n  contentItems() {\n    const items = new ItemList();\n    const tag = this.attrs.model;\n\n    items.add(\n      'tag-title',\n      <h1 className=\"Hero-title\">\n        {tag.icon() && tagIcon(tag, {}, { useColor: false })} {tag.name()}\n      </h1>,\n      100\n    );\n\n    items.add('tag-subtitle', <div className=\"Hero-subtitle\">{tag.description()}</div>, 90);\n\n    return items;\n  }\n}\n","import app from 'flarum/forum/app';\nimport type Mithril from 'mithril';\nimport { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nimport GlobalSearchState from 'flarum/forum/states/GlobalSearchState';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\n\nimport TagHero from './components/TagHero';\nimport Tag from '../common/models/Tag';\nimport { ComponentAttrs } from 'flarum/common/Component';\n\nconst findTag = (slug: string) => app.store.all<Tag>('tags').find((tag) => tag.slug().localeCompare(slug, undefined, { sensitivity: 'base' }) === 0);\n\nexport default function () {\n  IndexPage.prototype.currentTag = function () {\n    if (this.currentActiveTag) {\n      return this.currentActiveTag;\n    }\n\n    const slug = app.search.params().tags;\n    let tag = null;\n\n    if (slug) {\n      tag = findTag(slug);\n    }\n\n    if ((slug && !tag) || (tag && !tag.isChild() && !tag.children())) {\n      if (this.currentTagLoading) {\n        return;\n      }\n\n      this.currentTagLoading = true;\n\n      // Unlike the backend, no need to fetch parent.children because if we're on\n      // a child tag page, then either:\n      //    - We loaded in that child tag (and its siblings) in the API document\n      //    - We first navigated to the current tag's parent, which would have loaded in the current tag's siblings.\n      app.store\n        .find('tags', slug, { include: 'children,children.parent,parent,state' })\n        .then(() => {\n          this.currentActiveTag = findTag(slug);\n\n          m.redraw();\n        })\n        .finally(() => {\n          this.currentTagLoading = false;\n        });\n    }\n\n    if (tag) {\n      this.currentActiveTag = tag;\n      return this.currentActiveTag;\n    }\n\n    return;\n  };\n\n  // If currently viewing a tag, insert a tag hero at the top of the view.\n  override(IndexPage.prototype, 'hero', function (original) {\n    const tag = this.currentTag();\n\n    if (tag) return <TagHero model={tag} />;\n\n    return original();\n  });\n\n  extend(IndexPage.prototype, 'view', function (vdom: Mithril.Vnode<ComponentAttrs, {}>) {\n    const tag = this.currentTag();\n\n    if (tag) vdom.attrs.className += ' IndexPage--tag' + tag.id();\n  });\n\n  extend(IndexPage.prototype, 'setTitle', function () {\n    const tag = this.currentTag();\n\n    if (tag) {\n      app.setTitle(tag.name());\n    }\n  });\n\n  // If currently viewing a tag, restyle the 'new discussion' button to use\n  // the tag's color, and disable if the user isn't allowed to edit.\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    const tag = this.currentTag();\n\n    if (tag) {\n      const color = tag.color();\n      const canStartDiscussion = tag.canStartDiscussion() || !app.session.user;\n      const newDiscussion = items.get('newDiscussion') as Mithril.Vnode<ComponentAttrs, {}>;\n\n      if (color) {\n        newDiscussion.attrs.className = classList([newDiscussion.attrs.className, 'Button--tagColored', textContrastClass(color)]);\n        newDiscussion.attrs.style = { '--color': color };\n      }\n\n      newDiscussion.attrs.disabled = !canStartDiscussion;\n      newDiscussion.children = app.translator.trans(\n        canStartDiscussion ? 'core.forum.index.start_discussion_button' : 'core.forum.index.cannot_start_discussion_button'\n      );\n    }\n  });\n\n  // Add a parameter for the global search state to pass on to the\n  // DiscussionListState that will let us filter discussions by tag.\n  extend(GlobalSearchState.prototype, 'params', function (params) {\n    params.tags = m.route.param('tags');\n  });\n\n  // Translate that parameter into a gambit appended to the search query.\n  extend(DiscussionListState.prototype, 'requestParams', function (this: DiscussionListState, params) {\n    if (typeof params.include === 'string') {\n      params.include = [params.include];\n    } else {\n      params.include?.push('tags', 'tags.parent');\n    }\n\n    if (this.params.tags) {\n      const filter = params.filter ?? {};\n      filter.tag = this.params.tags;\n      // TODO: replace this with a more robust system.\n      const q = filter.q;\n      if (q) {\n        filter.q = `${q} tag:${this.params.tags}`;\n      }\n      params.filter = filter;\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionHero'];","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import extract from 'flarum/common/utils/extract';\nimport tagLabel from './tagLabel';\nimport sortTags from '../utils/sortTags';\nimport classList from 'flarum/common/utils/classList';\n\nexport default function tagsLabel(tags, attrs = {}) {\n  const children = [];\n  const { link, ...otherAttrs } = attrs;\n\n  otherAttrs.className = classList('TagsLabel', otherAttrs.className);\n\n  if (tags) {\n    sortTags(tags).forEach((tag) => {\n      if (tag || tags.length === 1) {\n        children.push(tagLabel(tag, { link }));\n      }\n    });\n  } else {\n    children.push(tagLabel());\n  }\n\n  return <span {...otherAttrs}>{children}</span>;\n}\n","import { extend } from 'flarum/common/extend';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport classList from 'flarum/common/utils/classList';\n\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function () {\n  // Add tag labels to each discussion in the discussion list.\n  extend(DiscussionListItem.prototype, 'infoItems', function (items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags), 10);\n    }\n  });\n\n  // Restyle a discussion's hero to use its first tag's color.\n  extend(DiscussionHero.prototype, 'view', function (view) {\n    const tags = sortTags(this.attrs.discussion.tags());\n\n    if (tags && tags.length) {\n      const color = tags[0].color();\n      if (color) {\n        view.attrs.style = { '--hero-bg': color };\n        view.attrs.className = classList(view.attrs.className, 'DiscussionHero--colored', textContrastClass(color));\n      }\n    }\n  });\n\n  // Add a list of a discussion's tags to the discussion hero, displayed\n  // before the title. Put the title on its own line.\n  extend(DiscussionHero.prototype, 'items', function (items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags, { link: true }), 5);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","export default function getSelectableTags(discussion) {\n  let tags = app.store.all('tags');\n\n  if (discussion) {\n    tags = tags.filter((tag) => tag.canAddToDiscussion() || discussion.tags().indexOf(tag) !== -1);\n  } else {\n    tags = tags.filter((tag) => tag.canStartDiscussion());\n  }\n\n  return tags;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\n\n/**\n * @TODO move to core\n */\nexport default class ToggleButton extends Component {\n  view(vnode) {\n    const { className, isToggled, ...attrs } = this.attrs;\n    const icon = isToggled ? 'far fa-check-circle' : 'far fa-circle';\n\n    return (\n      <Button {...attrs} icon={icon} className={classList([className, isToggled && 'Button--toggled'])}>\n        {vnode.children}\n      </Button>\n    );\n  }\n}\n","import app from 'flarum/common/app';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport highlight from 'flarum/common/helpers/highlight';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Modal from 'flarum/common/components/Modal';\nimport Stream from 'flarum/common/utils/Stream';\n\nimport sortTags from '../utils/sortTags';\nimport tagLabel from '../helpers/tagLabel';\nimport tagIcon from '../helpers/tagIcon';\nimport ToggleButton from '../../forum/components/ToggleButton';\n\nimport type Tag from '../models/Tag';\nimport type { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport type Mithril from 'mithril';\n\nexport interface ITagSelectionModalLimits {\n  /** Whether to allow bypassing the limits set here. This will show a toggle button to bypass limits. */\n  allowBypassing?: boolean;\n  /** Maximum number of primary/secondary tags allowed. */\n  max?: {\n    total?: number;\n    primary?: number;\n    secondary?: number;\n  };\n  /** Minimum number of primary/secondary tags to be selected. */\n  min?: {\n    total?: number;\n    primary?: number;\n    secondary?: number;\n  };\n}\n\nexport interface ITagSelectionModalAttrs extends IInternalModalAttrs {\n  /** Custom modal className to use. */\n  className?: string;\n  /** Modal title, defaults to 'Choose Tags'. */\n  title?: string;\n  /** Initial tag selection value. */\n  selectedTags?: Tag[];\n  /** Limits set based on minimum and maximum number of primary/secondary tags that can be selected. */\n  limits?: ITagSelectionModalLimits;\n  /** Whether to allow resetting the value. Defaults to true. */\n  allowResetting?: boolean;\n  /** Whether to require the parent tag of a selected tag to be selected as well. */\n  requireParentTag?: boolean;\n  /** Filter tags that can be selected. */\n  selectableTags?: (tags: Tag[]) => Tag[];\n  /** Whether a tag can be selected. */\n  canSelect: (tag: Tag) => boolean;\n  /** Callback for when a tag is selected. */\n  onSelect?: (tag: Tag, selected: Tag[]) => void;\n  /** Callback for when a tag is deselected. */\n  onDeselect?: (tag: Tag, selected: Tag[]) => void;\n  /** Callback for when the selection is submitted. */\n  onsubmit?: (selected: Tag[]) => void;\n}\n\nexport type ITagSelectionModalState = undefined;\n\nexport default class TagSelectionModal<\n  CustomAttrs extends ITagSelectionModalAttrs = ITagSelectionModalAttrs,\n  CustomState extends ITagSelectionModalState = ITagSelectionModalState\n> extends Modal<CustomAttrs, CustomState> {\n  protected loading = true;\n  protected tags!: Tag[];\n  protected selected: Tag[] = [];\n  protected bypassReqs: boolean = false;\n\n  protected filter = Stream('');\n  protected focused = false;\n  protected navigator = new KeyboardNavigatable();\n  protected indexTag?: Tag;\n\n  static initAttrs(attrs: ITagSelectionModalAttrs) {\n    super.initAttrs(attrs);\n\n    // Default values for optional attributes.\n    attrs.title ||= extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.title'));\n    attrs.canSelect ||= () => true;\n    attrs.allowResetting ??= true;\n    attrs.limits = {\n      min: {\n        total: attrs.limits?.min?.total ?? -Infinity,\n        primary: attrs.limits?.min?.primary ?? -Infinity,\n        secondary: attrs.limits?.min?.secondary ?? -Infinity,\n      },\n      max: {\n        total: attrs.limits?.max?.total ?? Infinity,\n        primary: attrs.limits?.max?.primary ?? Infinity,\n        secondary: attrs.limits?.max?.secondary ?? Infinity,\n      },\n    };\n\n    // Prevent illogical limits from being provided.\n    catchInvalidLimits(attrs.limits);\n  }\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.navigator\n      .onUp(() => this.setIndex(this.getCurrentNumericIndex() - 1, true))\n      .onDown(() => this.setIndex(this.getCurrentNumericIndex() + 1, true))\n      .onSelect(this.select.bind(this))\n      .onRemove(() => this.selected.splice(this.selected.length - 1, 1));\n\n    app.tagList.load(['parent']).then((tags) => {\n      this.loading = false;\n\n      if (this.attrs.selectableTags) {\n        tags = this.attrs.selectableTags(tags);\n      }\n\n      this.tags = sortTags(tags);\n\n      if (this.attrs.selectedTags) {\n        this.attrs.selectedTags.map(this.addTag.bind(this));\n      }\n\n      this.indexTag = tags[0];\n\n      m.redraw();\n    });\n  }\n\n  className() {\n    return classList('TagSelectionModal', this.attrs.className);\n  }\n\n  title() {\n    return this.attrs.title;\n  }\n\n  content() {\n    if (this.loading || !this.tags) {\n      return <LoadingIndicator />;\n    }\n\n    const filter = this.filter().toLowerCase();\n    const primaryCount = this.primaryCount();\n    const secondaryCount = this.secondaryCount();\n    const tags = this.getFilteredTags();\n\n    const inputWidth = Math.max(extractText(this.getInstruction(primaryCount, secondaryCount)).length, this.filter().length);\n\n    return [\n      <div className=\"Modal-body\">\n        <div className=\"TagSelectionModal-form\">\n          <div className=\"TagSelectionModal-form-input\">\n            <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')} onclick={() => this.$('.TagsInput input').focus()}>\n              <span className=\"TagsInput-selected\">\n                {this.selected.map((tag) => (\n                  <span\n                    className=\"TagsInput-tag\"\n                    onclick={() => {\n                      this.removeTag(tag);\n                      this.onready();\n                    }}\n                  >\n                    {tagLabel(tag)}\n                  </span>\n                ))}\n              </span>\n              <input\n                className=\"FormControl\"\n                placeholder={extractText(this.getInstruction(primaryCount, secondaryCount))}\n                bidi={this.filter}\n                style={{ width: inputWidth + 'ch' }}\n                onkeydown={this.navigator.navigate.bind(this.navigator)}\n                onfocus={() => (this.focused = true)}\n                onblur={() => (this.focused = false)}\n              />\n            </div>\n          </div>\n          <div className=\"TagSelectionModal-form-submit App-primaryControl\">\n            <Button\n              type=\"submit\"\n              className=\"Button Button--primary\"\n              disabled={!this.meetsRequirements(primaryCount, secondaryCount)}\n              icon=\"fas fa-check\"\n            >\n              {app.translator.trans('flarum-tags.lib.tag_selection_modal.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>,\n\n      <div className=\"Modal-footer\">\n        <ul className=\"TagSelectionModal-list SelectTagList\">\n          {tags.map((tag) => (\n            <li\n              data-index={tag.id()}\n              className={classList({\n                pinned: tag.position() !== null,\n                child: !!tag.parent(),\n                colored: !!tag.color(),\n                selected: this.selected.includes(tag),\n                active: this.indexTag === tag,\n              })}\n              style={{ color: tag.color() }}\n              onmouseover={() => (this.indexTag = tag)}\n              onclick={this.toggleTag.bind(this, tag)}\n            >\n              {tagIcon(tag)}\n              <span className=\"SelectTagListItem-name\">{highlight(tag.name(), filter)}</span>\n              {tag.description() ? <span className=\"SelectTagListItem-description\">{tag.description()}</span> : ''}\n            </li>\n          ))}\n        </ul>\n        {this.attrs.limits!.allowBypassing && (\n          <div className=\"TagSelectionModal-controls\">\n            <ToggleButton className=\"Button\" onclick={() => (this.bypassReqs = !this.bypassReqs)} isToggled={this.bypassReqs}>\n              {app.translator.trans('flarum-tags.lib.tag_selection_modal.bypass_requirements')}\n            </ToggleButton>\n          </div>\n        )}\n      </div>,\n    ];\n  }\n\n  /**\n   * Filters the available tags on every state change.\n   */\n  private getFilteredTags(): Tag[] {\n    const filter = this.filter().toLowerCase();\n    const primaryCount = this.primaryCount();\n    const secondaryCount = this.secondaryCount();\n    let tags = this.tags;\n\n    if (this.attrs.requireParentTag) {\n      // Filter out all child tags whose parents have not been selected. This\n      // makes it impossible to select a child if its parent hasn't been selected.\n      tags = tags.filter((tag) => {\n        const parent = tag.parent();\n        return parent !== null && (parent === false || this.selected.includes(parent));\n      });\n    }\n\n    if (!this.bypassReqs) {\n      // If we reached the total maximum number of tags, we can't select anymore.\n      if (this.selected.length >= this.attrs.limits!.max!.total!) {\n        tags = tags.filter((tag) => this.selected.includes(tag));\n      }\n      // If the number of selected primary/secondary tags is at the maximum, then\n      // we'll filter out all other tags of that type.\n      else {\n        if (primaryCount >= this.attrs.limits!.max!.primary!) {\n          tags = tags.filter((tag) => !tag.isPrimary() || this.selected.includes(tag));\n        }\n        if (secondaryCount >= this.attrs.limits!.max!.secondary!) {\n          tags = tags.filter((tag) => tag.isPrimary() || this.selected.includes(tag));\n        }\n      }\n    }\n\n    // If the user has entered text in the filter input, then filter by tags\n    // whose name matches what they've entered.\n    if (filter) {\n      tags = tags.filter((tag) => tag.name().toLowerCase().includes(filter));\n    }\n\n    if (!this.indexTag || !tags.includes(this.indexTag)) this.indexTag = tags[0];\n\n    return tags;\n  }\n\n  /**\n   * Counts the number of selected primary tags.\n   */\n  protected primaryCount(): number {\n    return this.selected.filter((tag) => tag.isPrimary()).length;\n  }\n\n  /**\n   * Counts the number of selected secondary tags.\n   */\n  protected secondaryCount(): number {\n    return this.selected.filter((tag) => !tag.isPrimary()).length;\n  }\n\n  /**\n   * Validates the number of selected primary/secondary tags against the set min max limits.\n   */\n  protected meetsRequirements(primaryCount: number, secondaryCount: number) {\n    if (this.bypassReqs || (this.attrs.allowResetting && this.selected.length === 0)) {\n      return true;\n    }\n\n    if (this.selected.length < this.attrs.limits!.min!.total!) {\n      return false;\n    }\n\n    return primaryCount >= this.attrs.limits!.min!.primary! && secondaryCount >= this.attrs.limits!.min!.secondary!;\n  }\n\n  /**\n   * Add the given tag to the list of selected tags.\n   */\n  protected addTag(tag: Tag | undefined) {\n    if (!tag || !this.attrs.canSelect(tag)) return;\n\n    if (this.attrs.onSelect) {\n      this.attrs.onSelect(tag, this.selected);\n    }\n\n    // If this tag has a parent, we'll also need to add the parent tag to the\n    // selected list if it's not already in there.\n    if (this.attrs.requireParentTag) {\n      const parent = tag.parent();\n      if (parent && !this.selected.includes(parent)) {\n        this.selected.push(parent);\n      }\n    }\n\n    if (!this.selected.includes(tag)) {\n      this.selected.push(tag);\n    }\n  }\n\n  /**\n   * Remove the given tag from the list of selected tags.\n   */\n  protected removeTag(tag: Tag) {\n    const index = this.selected.indexOf(tag);\n\n    if (index !== -1) {\n      this.selected.splice(index, 1);\n\n      // Look through the list of selected tags for any tags which have the tag\n      // we just removed as their parent. We'll need to remove them too.\n      if (this.attrs.requireParentTag) {\n        this.selected.filter((t) => t.parent() === tag).forEach(this.removeTag.bind(this));\n      }\n\n      if (this.attrs.onDeselect) {\n        this.attrs.onDeselect(tag, this.selected);\n      }\n    }\n  }\n\n  protected toggleTag(tag: Tag) {\n    // Won't happen, needed for type safety.\n    if (!this.tags) return;\n\n    if (this.selected.includes(tag)) {\n      this.removeTag(tag);\n    } else {\n      this.addTag(tag);\n    }\n\n    if (this.filter()) {\n      this.filter('');\n      this.indexTag = this.tags[0];\n    }\n\n    this.onready();\n  }\n\n  /**\n   * Gives human text instructions based on the current number of selected tags and set limits.\n   */\n  protected getInstruction(primaryCount: number, secondaryCount: number) {\n    if (this.bypassReqs) {\n      return '';\n    }\n\n    if (primaryCount < this.attrs.limits!.min!.primary!) {\n      const remaining = this.attrs.limits!.min!.primary! - primaryCount;\n      return extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.choose_primary_placeholder', { count: remaining }));\n    } else if (secondaryCount < this.attrs.limits!.min!.secondary!) {\n      const remaining = this.attrs.limits!.min!.secondary! - secondaryCount;\n      return extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.choose_secondary_placeholder', { count: remaining }));\n    } else if (this.selected.length < this.attrs.limits!.min!.total!) {\n      const remaining = this.attrs.limits!.min!.total! - this.selected.length;\n      return extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.choose_tags_placeholder', { count: remaining }));\n    }\n\n    return '';\n  }\n\n  /**\n   * Submit tag selection.\n   */\n  onsubmit(e: SubmitEvent) {\n    e.preventDefault();\n\n    if (this.attrs.onsubmit) this.attrs.onsubmit(this.selected);\n\n    this.hide();\n  }\n\n  protected select(e: KeyboardEvent) {\n    // Ctrl + Enter submits the selection, just Enter completes the current entry\n    if (e.metaKey || e.ctrlKey || (this.indexTag && this.selected.includes(this.indexTag))) {\n      if (this.selected.length) {\n        // The DOM submit method doesn't emit a `submit event, so we\n        // simulate a manual submission so our `onsubmit` logic is run.\n        this.$('button[type=\"submit\"]').click();\n      }\n    } else if (this.indexTag) {\n      this.getItem(this.indexTag)[0].dispatchEvent(new Event('click'));\n    }\n  }\n\n  protected selectableItems() {\n    return this.$('.TagSelectionModal-list > li');\n  }\n\n  protected getCurrentNumericIndex() {\n    if (!this.indexTag) return -1;\n\n    return this.selectableItems().index(this.getItem(this.indexTag));\n  }\n\n  protected getItem(selectedTag: Tag) {\n    return this.selectableItems().filter(`[data-index=\"${selectedTag.id()}\"]`);\n  }\n\n  protected setIndex(index: number, scrollToItem: boolean) {\n    const $items = this.selectableItems();\n    const $dropdown = $items.parent();\n\n    if (index < 0) {\n      index = $items.length - 1;\n    } else if (index >= $items.length) {\n      index = 0;\n    }\n\n    const $item = $items.eq(index);\n\n    this.indexTag = app.store.getById('tags', $item.attr('data-index')!);\n\n    m.redraw();\n\n    if (scrollToItem && this.indexTag) {\n      const dropdownScroll = $dropdown.scrollTop()!;\n      const dropdownTop = $dropdown.offset()!.top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight()!;\n      const itemTop = $item.offset()!.top;\n      const itemBottom = itemTop + $item.outerHeight()!;\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({ scrollTop }, 100);\n      }\n    }\n  }\n}\n\n/**\n * Catch invalid limits provided to the tag selection modal.\n */\nfunction catchInvalidLimits(limits: ITagSelectionModalLimits) {\n  if (limits.min!.primary! > limits.max!.primary!) {\n    throw new Error('The minimum number of primary tags allowed cannot be more than the maximum number of primary tags allowed.');\n  }\n\n  if (limits.min!.secondary! > limits.max!.secondary!) {\n    throw new Error('The minimum number of secondary tags allowed cannot be more than the maximum number of secondary tags allowed.');\n  }\n\n  if (limits.min!.total! > limits.max!.primary! + limits.max!.secondary!) {\n    throw new Error('The minimum number of tags allowed cannot be more than the maximum number of primary and secondary tags allowed together.');\n  }\n\n  if (limits.max!.total! < limits.min!.primary! + limits.min!.secondary!) {\n    throw new Error('The maximum number of tags allowed cannot be less than the minimum number of primary and secondary tags allowed together.');\n  }\n\n  if (limits.min!.total! > limits.max!.total!) {\n    throw new Error('The minimum number of tags allowed cannot be more than the maximum number of tags allowed.');\n  }\n}\n","import app from 'flarum/forum/app';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\n\nimport getSelectableTags from '../utils/getSelectableTags';\nimport TagSelectionModal, { ITagSelectionModalAttrs } from '../../common/components/TagSelectionModal';\n\nimport type Discussion from 'flarum/common/models/Discussion';\nimport type Tag from '../../common/models/Tag';\n\nexport interface TagDiscussionModalAttrs extends ITagSelectionModalAttrs {\n  discussion?: Discussion;\n}\n\nexport default class TagDiscussionModal extends TagSelectionModal<TagDiscussionModalAttrs> {\n  static initAttrs(attrs: TagDiscussionModalAttrs) {\n    super.initAttrs(attrs);\n\n    const title = attrs.discussion\n      ? app.translator.trans('flarum-tags.forum.choose_tags.edit_title', { title: <em>{attrs.discussion.title()}</em> })\n      : app.translator.trans('flarum-tags.forum.choose_tags.title');\n\n    attrs.className = classList(attrs.className, 'TagDiscussionModal');\n    attrs.title = extractText(title);\n    attrs.allowResetting = !!app.forum.attribute('canBypassTagCounts');\n    attrs.limits = {\n      allowBypassing: attrs.allowResetting,\n      max: {\n        primary: app.forum.attribute<number>('maxPrimaryTags'),\n        secondary: app.forum.attribute<number>('maxSecondaryTags'),\n      },\n      min: {\n        primary: app.forum.attribute<number>('minPrimaryTags'),\n        secondary: app.forum.attribute<number>('minSecondaryTags'),\n      },\n    };\n    attrs.requireParentTag = true;\n    attrs.selectableTags = () => getSelectableTags(attrs.discussion);\n    attrs.selectedTags ??= (attrs.discussion?.tags() as Tag[]) || [];\n    attrs.canSelect = (tag) => tag.canStartDiscussion();\n\n    const suppliedOnsubmit = attrs.onsubmit || null;\n\n    // Save changes.\n    attrs.onsubmit = function (tags) {\n      const discussion = attrs.discussion;\n\n      if (discussion) {\n        discussion.save({ relationships: { tags } }).then(() => {\n          if (app.current.matches(DiscussionPage)) {\n            app.current.get('stream').update();\n          }\n\n          m.redraw();\n        });\n      }\n\n      if (suppliedOnsubmit) suppliedOnsubmit(tags);\n    };\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport Button from 'flarum/common/components/Button';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\n\nexport default function () {\n  // Add a control allowing the discussion to be moved to another category.\n  extend(DiscussionControls, 'moderationControls', function (items, discussion) {\n    if (discussion.canTag()) {\n      items.add(\n        'tags',\n        <Button icon=\"fas fa-tag\" onclick={() => app.modal.show(TagDiscussionModal, { discussion })}>\n          {app.translator.trans('flarum-tags.forum.discussion_controls.edit_tags_button')}\n        </Button>\n      );\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","import { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport classList from 'flarum/common/utils/classList';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default function () {\n  extend(IndexPage.prototype, 'newDiscussionAction', function (promise) {\n    // From `addTagFilter\n    const tag = this.currentTag();\n\n    if (tag) {\n      const parent = tag.parent();\n      const tags = parent ? [parent, tag] : [tag];\n      promise.then((composer) => (composer.fields.tags = tags));\n    } else {\n      app.composer.fields.tags = [];\n    }\n  });\n\n  extend(DiscussionComposer.prototype, 'oninit', function () {\n    app.tagList.load(['parent']).then(() => m.redraw());\n  });\n\n  // Add tag-selection abilities to the discussion composer.\n  DiscussionComposer.prototype.chooseTags = function () {\n    const selectableTags = getSelectableTags();\n\n    if (!selectableTags.length) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: (this.composer.fields.tags || []).slice(0),\n      onsubmit: (tags) => {\n        this.composer.fields.tags = tags;\n        this.$('textarea').focus();\n      },\n    });\n  };\n\n  // Add a tag-selection menu to the discussion composer's header, after the\n  // title.\n  extend(DiscussionComposer.prototype, 'headerItems', function (items) {\n    const tags = this.composer.fields.tags || [];\n    const selectableTags = getSelectableTags();\n\n    items.add(\n      'tags',\n      <a className={classList(['DiscussionComposer-changeTags', !selectableTags.length && 'disabled'])} onclick={this.chooseTags.bind(this)}>\n        {tags.length ? (\n          tagsLabel(tags)\n        ) : (\n          <span className=\"TagLabel untagged\">{app.translator.trans('flarum-tags.forum.composer_discussion.choose_tags_link')}</span>\n        )}\n      </a>,\n      10\n    );\n  });\n\n  override(DiscussionComposer.prototype, 'onsubmit', function (original) {\n    const chosenTags = this.composer.fields.tags || [];\n    const chosenPrimaryTags = chosenTags.filter((tag) => tag.position() !== null && !tag.isChild());\n    const chosenSecondaryTags = chosenTags.filter((tag) => tag.position() === null);\n    const selectableTags = getSelectableTags();\n\n    const minPrimaryTags = parseInt(app.forum.attribute('minPrimaryTags'));\n    const minSecondaryTags = parseInt(app.forum.attribute('minSecondaryTags'));\n    const maxPrimaryTags = parseInt(app.forum.attribute('maxPrimaryTags'));\n    const maxSecondaryTags = parseInt(app.forum.attribute('maxSecondaryTags'));\n\n    if (\n      ((!chosenTags.length && maxPrimaryTags !== 0 && maxSecondaryTags !== 0) ||\n        chosenPrimaryTags.length < minPrimaryTags ||\n        chosenSecondaryTags.length < minSecondaryTags) &&\n      selectableTags.length\n    ) {\n      app.modal.show(TagDiscussionModal, {\n        selectedTags: chosenTags,\n        onsubmit: (tags) => {\n          this.composer.fields.tags = tags;\n          original();\n        },\n      });\n    } else {\n      original();\n    }\n  });\n\n  // Add the selected tags as data to submit to the server.\n  extend(DiscussionComposer.prototype, 'data', function (data) {\n    data.relationships = data.relationships || {};\n    data.relationships.tags = this.composer.fields.tags;\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/EventPost'];","import EventPost from 'flarum/forum/components/EventPost';\nimport tagsLabel from '../../common/helpers/tagsLabel';\n\nexport default class DiscussionTaggedPost extends EventPost {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const oldTags = attrs.post.content()[0];\n    const newTags = attrs.post.content()[1];\n\n    function diffTags(tags1, tags2) {\n      return tags1.filter((tag) => tags2.indexOf(tag) === -1).map((id) => app.store.getById('tags', id));\n    }\n\n    attrs.tagsAdded = diffTags(newTags, oldTags);\n    attrs.tagsRemoved = diffTags(oldTags, newTags);\n  }\n\n  icon() {\n    return 'fas fa-tag';\n  }\n\n  descriptionKey() {\n    if (this.attrs.tagsAdded.length) {\n      if (this.attrs.tagsRemoved.length) {\n        return 'flarum-tags.forum.post_stream.added_and_removed_tags_text';\n      }\n\n      return 'flarum-tags.forum.post_stream.added_tags_text';\n    }\n\n    return 'flarum-tags.forum.post_stream.removed_tags_text';\n  }\n\n  descriptionData() {\n    const data = {};\n\n    if (this.attrs.tagsAdded.length) {\n      data.tagsAdded = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsAdded, { link: true }),\n        count: this.attrs.tagsAdded.length,\n      });\n    }\n\n    if (this.attrs.tagsRemoved.length) {\n      data.tagsRemoved = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsRemoved, { link: true }),\n        count: this.attrs.tagsRemoved.length,\n      });\n    }\n\n    return data;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import computed from 'flarum/common/utils/computed';\nimport Model from 'flarum/common/Model';\nimport type Discussion from 'flarum/common/models/Discussion';\n\nexport default class Tag extends Model {\n  name() {\n    return Model.attribute<string>('name').call(this);\n  }\n  slug() {\n    return Model.attribute<string>('slug').call(this);\n  }\n  description() {\n    return Model.attribute<string | null>('description').call(this);\n  }\n\n  color() {\n    return Model.attribute<string | null>('color').call(this);\n  }\n  backgroundUrl() {\n    return Model.attribute<string | null>('backgroundUrl').call(this);\n  }\n  backgroundMode() {\n    return Model.attribute<string | null>('backgroundMode').call(this);\n  }\n  icon() {\n    return Model.attribute<string | null>('icon').call(this);\n  }\n\n  position() {\n    return Model.attribute<number | null>('position').call(this);\n  }\n  parent() {\n    return Model.hasOne<Tag | null>('parent').call(this);\n  }\n  children() {\n    return Model.hasMany<Tag>('children').call(this);\n  }\n  defaultSort() {\n    return Model.attribute<string | null>('defaultSort').call(this);\n  }\n  isChild() {\n    return Model.attribute<boolean>('isChild').call(this);\n  }\n  isHidden() {\n    return Model.attribute<boolean>('isHidden').call(this);\n  }\n\n  discussionCount() {\n    return Model.attribute<number>('discussionCount').call(this);\n  }\n  lastPostedAt() {\n    return Model.attribute('lastPostedAt', Model.transformDate).call(this);\n  }\n  lastPostedDiscussion() {\n    return Model.hasOne<Discussion | null>('lastPostedDiscussion').call(this);\n  }\n\n  isRestricted() {\n    return Model.attribute<boolean>('isRestricted').call(this);\n  }\n  canStartDiscussion() {\n    return Model.attribute<boolean>('canStartDiscussion').call(this);\n  }\n  canAddToDiscussion() {\n    return Model.attribute<boolean>('canAddToDiscussion').call(this);\n  }\n\n  isPrimary() {\n    return computed<boolean, this>('position', 'parent', (position, parent) => position !== null && parent === false).call(this);\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport Tag from './models/Tag';\n\nexport default [\n  new Extend.Store() //\n    .add('tags', Tag),\n];\n","import app from 'flarum/forum/app';\nimport Extend from 'flarum/common/extenders';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Discussion from 'flarum/common/models/Discussion';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\nimport TagsPage from './components/TagsPage';\nimport Tag from '../common/models/Tag';\n\nimport commonExtend from '../common/extend';\n\nexport default [\n  ...commonExtend,\n\n  new Extend.Routes() //\n    .add('tags', '/tags', TagsPage) //\n    .add('tag', '/t/:tags', IndexPage) //\n    .helper('tag', (tag) => app.route('tag', { tags: tag.slug() })),\n\n  new Extend.PostTypes() //\n    .add('discussionTagged', DiscussionTaggedPost),\n\n  new Extend.Model(Discussion) //\n    .hasMany<Tag>('tags') //\n    .attribute<boolean>('canTag'),\n];\n","import sortTags from './utils/sortTags';\nimport Tag from './models/Tag';\nimport tagsLabel from './helpers/tagsLabel';\nimport tagIcon from './helpers/tagIcon';\nimport tagLabel from './helpers/tagLabel';\nimport TagSelectionModal from './components/TagSelectionModal';\nimport TagListState from './states/TagListState';\n\nexport default {\n  'tags/utils/sortTags': sortTags,\n  'tags/models/Tag': Tag,\n  'tags/helpers/tagsLabel': tagsLabel,\n  'tags/helpers/tagIcon': tagIcon,\n  'tags/helpers/tagLabel': tagLabel,\n  'tags/components/TagSelectionModal': TagSelectionModal,\n  'tags/states/TagListState': TagListState,\n};\n","import compat from '../common/compat';\n\nimport addTagFilter from './addTagFilter';\nimport addTagControl from './addTagControl';\nimport TagHero from './components/TagHero';\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport TagsPage from './components/TagsPage';\nimport ToggleButton from './components/ToggleButton';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\nimport TagLinkButton from './components/TagLinkButton';\nimport addTagList from './addTagList';\nimport addTagLabels from './addTagLabels';\nimport addTagComposer from './addTagComposer';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default Object.assign(compat, {\n  'tags/addTagFilter': addTagFilter,\n  'tags/addTagControl': addTagControl,\n  'tags/components/TagHero': TagHero,\n  'tags/components/TagDiscussionModal': TagDiscussionModal,\n  'tags/components/TagsPage': TagsPage,\n  'tags/components/ToggleButton': ToggleButton,\n  'tags/components/DiscussionTaggedPost': DiscussionTaggedPost,\n  'tags/components/TagLinkButton': TagLinkButton,\n  'tags/addTagList': addTagList,\n  'tags/addTagLabels': addTagLabels,\n  'tags/addTagComposer': addTagComposer,\n  'tags/utils/getSelectableTags': getSelectableTags,\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","import app from 'flarum/forum/app';\n\nimport TagListState from '../common/states/TagListState';\n\nimport addTagList from './addTagList';\nimport addTagFilter from './addTagFilter';\nimport addTagLabels from './addTagLabels';\nimport addTagControl from './addTagControl';\nimport addTagComposer from './addTagComposer';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('flarum-tags', function () {\n  app.tagList = new TagListState();\n\n  addTagList();\n  addTagFilter();\n  addTagLabels();\n  addTagControl();\n  addTagComposer();\n});\n\n// Expose compat API\nimport tagsCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, tagsCompat);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["runtime","require","module","exports","regeneratorRuntime","accidentalStrictMode","globalThis","Function","_typeof","o","Symbol","iterator","constructor","prototype","__esModule","_regeneratorRuntime","e","t","r","Object","n","hasOwnProperty","defineProperty","value","i","a","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","flarum","core","compat","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","TagListState","loadedIncludes","_proto","load","_load","_callee","includes","unloadedIncludes","_this","_context","query","filter","include","has","app","all","_x","_query","_callee2","_this2","_context2","Set","find","join","val","add","_x2","_setPrototypeOf","bind","_inheritsLoose","tagIcon","tag","attrs","settings","hasIcon","icon","_settings$useColor","useColor","className","classList","style","color","m","TagLinkButton","_LinkButton","view","vnode","model","description","child","isChild","Link","href","route","undefined","title","translator","trans","initAttrs","params","tags","slug","LinkButton","tagLabel","link","extract","tagText","textContrastClass","sortTags","sort","b","aPos","position","bPos","discussionCount","aParent","parent","bParent","TagsPage","_Page","oninit","history","preloaded","preloadedApiDocument","loading","tagList","store","redraw","oncreate","setTitle","setTitleCount","pageContent","toArray","items","ItemList","hero","mainContent","sidebar","content","contentItems","LoadingIndicator","pinned","cloud","tagTileListView","cloudView","IndexPage","listItems","sidebarItems","map","tagTileView","lastPostedDiscussion","children","colored","discussion","lastPostNumber","humanTime","lastPostedAt","Page","extend","matches","Separator","stickyParams","currentTag","addTag","active","id","more","splice","TagHero","_Component","_classList","viewItems","Component","findTag","localeCompare","sensitivity","currentActiveTag","currentTagLoading","override","original","vdom","canStartDiscussion","user","newDiscussion","get","disabled","GlobalSearchState","param","DiscussionListState","_params$include","_params$filter","q","_objectWithoutPropertiesLoose","indexOf","tagsLabel","_attrs","otherAttrs","_excluded","DiscussionListItem","DiscussionHero","getSelectableTags","canAddToDiscussion","ToggleButton","_this$attrs","isToggled","Button","assign","TagSelectionModal","_Modal","_len","args","Array","_key","concat","selected","bypassReqs","Stream","focused","navigator","KeyboardNavigatable","indexTag","_attrs$limits$min$tot","_attrs$limits","_attrs$limits$min$pri","_attrs$limits2","_attrs$limits$min$sec","_attrs$limits3","_attrs$limits$max$tot","_attrs$limits4","_attrs$limits$max$pri","_attrs$limits5","_attrs$limits$max$sec","_attrs$limits6","extractText","canSelect","allowResetting","limits","min","total","primary","secondary","max","Infinity","catchInvalidLimits","onUp","setIndex","getCurrentNumericIndex","onDown","onSelect","select","onRemove","selectableTags","selectedTags","_this3","toLowerCase","primaryCount","secondaryCount","getFilteredTags","inputWidth","Math","getInstruction","onclick","$","focus","removeTag","onready","placeholder","bidi","width","onkeydown","navigate","onfocus","onblur","meetsRequirements","onmouseover","toggleTag","highlight","allowBypassing","_this4","requireParentTag","isPrimary","index","onDeselect","remaining","count","onsubmit","preventDefault","hide","metaKey","ctrlKey","click","getItem","dispatchEvent","Event","selectableItems","selectedTag","scrollToItem","$items","$dropdown","$item","eq","getById","attr","scrollTop","dropdownScroll","dropdownTop","offset","top","dropdownBottom","outerHeight","itemTop","itemBottom","parseInt","css","animate","Modal","TagDiscussionModal","_TagSelectionModal","_attrs$discussion","attribute","suppliedOnsubmit","save","relationships","DiscussionPage","update","DiscussionControls","canTag","modal","show","promise","composer","fields","DiscussionComposer","chooseTags","chosenTags","chosenPrimaryTags","chosenSecondaryTags","minPrimaryTags","forum","minSecondaryTags","maxPrimaryTags","maxSecondaryTags","data","DiscussionTaggedPost","_EventPost","oldTags","post","newTags","diffTags","tags1","tags2","tagsAdded","tagsRemoved","descriptionKey","descriptionData","EventPost","Tag","_Model","Model","backgroundUrl","backgroundMode","defaultSort","isHidden","isRestricted","computed","Extend","commonExtend","helper","Discussion","hasMany","addTagFilter","addTagControl","addTagList","addTagLabels","addTagComposer","tagsCompat","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","key","obj","prop"],"sourceRoot":""}